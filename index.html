<!DOCTYPE html>
</header>


<section class="hero">
<div class="burst" aria-hidden="true"></div>
<div class="wrap">
<h1>Willkommen in Dagestan</h1>
<p>Moderne Eindrücke, Geschichten und Bilder – kuratiert und frisch aus der Region.</p>
<div class="cta-row">
<a class="btn primary" href="news.html">Alle News ansehen</a>
<a class="btn" href="#latest">Neueste Beiträge</a>
</div>
</div>
</section>


<main class="wrap">
<h2 id="latest" style="margin:8px 0 10px">Neu & empfohlen</h2>
<div id="newsGrid" class="grid" aria-live="polite"></div>
</main>


<footer>
<div class="wrap">© <span id="y"></span> Dagestan Project · <span style="color:var(--muted)">Handgemacht mit HTML/CSS/JS</span></div>
</footer>


<script>
// ==== Einstellungen (READ-ONLY): Bitte an dein Repo anpassen ====
const GH_OWNER = "DEIN_OWNER"; // z.B. "dein-github-name"
const GH_REPO = "DEIN_REPO"; // z.B. "dagestan-site"
const GH_BRANCH= "main"; // z.B. "main" oder "gh-pages"
const NEWS_PATH = `https://raw.githubusercontent.com/${GH_OWNER}/${GH_REPO}/${GH_BRANCH}/data/news.json`;


// Jahr einsetzen
document.getElementById('y').textContent = new Date().getFullYear();


// Dark/Light (lokal, kein Flash)
const btn = document.getElementById('theme');
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
const stored = localStorage.getItem('theme');
if(stored === 'light') document.documentElement.style.filter = 'invert(1) hue-rotate(180deg)';
btn.addEventListener('click', ()=>{
const isLight = document.documentElement.style.filter.includes('invert');
if(isLight){
document.documentElement.style.filter = '';
localStorage.setItem('theme','dark');
btn.textContent = '☾';
} else {
document.documentElement.style.filter = 'invert(1) hue-rotate(180deg)';
localStorage.setItem('theme','light');
btn.textContent = '☼';
}
});


// News laden + rendern
async function loadNews(){
try{
const res = await fetch(NEWS_PATH, {cache:'no-store'});
if(!res.ok) throw new Error('news.json konnte nicht geladen werden');
const items = await res.json();
renderNews(items.slice(0, 9));
revealOnScroll();
}catch(e){
console.error(e);
document.getElementById('newsGrid').innerHTML = '<p style="color:#ffb7b7">Fehler beim Laden der News.</p>';
}
}


function cardTemplate(item){
return `
<article class="card reveal">
${item.imageUrl ? `<img class="thumb" src="${item.imageUrl}" alt="Newsbild">` : ''}
<div class="body">
<div class="kicker">${item.tag || 'News'}</div>
<h3 class="title">${item.title}</h3>
<div class="meta">${new Date(item.date).toLocaleDateString('de-DE')} · ${item.summary || ''}</div>
</div>
</article>`
}


function renderNews(items){
const grid = document.getElementById('newsGrid');
if(!items || !items.length){ grid.innerHTML = '<p>Noch keine News.</p>'; return; }
grid.innerHTML = items.map(cardTemplate).join('');
}


// sanfter Scroll-Reveal
function revealOnScroll(){
const els = document.querySelectorAll('.reveal');
const io = new IntersectionObserver((entries)=>{
entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('on'); io.unobserve(e.target); } });
}, {threshold: .15});
els.forEach(el=> io.observe(el));
}


loadNews();
</script>
</body>
</html>
